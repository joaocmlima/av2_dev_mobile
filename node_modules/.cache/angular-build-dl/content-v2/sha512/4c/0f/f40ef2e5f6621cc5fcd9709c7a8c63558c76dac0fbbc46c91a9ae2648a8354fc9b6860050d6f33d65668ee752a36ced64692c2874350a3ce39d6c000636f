{"version":3,"sources":["./src/app/pages/main/main.page.html","./src/app/news/news-api.service.ts","./src/app/pages/main/main-routing.module.ts","./src/app/pages/main/main.module.ts","./src/app/pages/main/main.page.scss","./src/app/pages/main/main.page.ts"],"names":[],"mappings":"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","file":"pages-main-main-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{title}} news</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <ion-header collapse=\\\"condense\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-title size=\\\"large\\\">{{title}} news</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"efeitoRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ion-card *ngFor = \\\"let news of lista_news\\\" href={{news.url}}>\\r\\n    <ion-card-header>\\r\\n      <ion-img src={{news.urlToImage}}></ion-img>\\r\\n      <br>\\r\\n      <ion-card-subtitle>{{news.publishedAt}}</ion-card-subtitle>\\r\\n      <ion-card-title>{{news.title}}</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      {{news.description}}\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"efeitoScrollInfinito($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"circular\\\"\\r\\n      loadingText=\\\"Carregando mais notícias...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\";","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NewsApiService {\r\n\r\n  private chave:string = \"a192006ac51443b085001c4a7485c2e0\";\r\n  private caminhoPadrao:string = \"https://newsapi.org/v2\";\r\n\r\n\r\n  constructor(public http:HttpClient) { }\r\n\r\n  public getEverythingAbout(assunto:string, page = 1, resultsPerPage=20){\r\n    let result = `${this.caminhoPadrao}/everything?q=${assunto}&pageSize=${resultsPerPage}&language=pt&page=${page}&apiKey=${this.chave}`;\r\n    console.log(result);\r\n    return this.http.get(result);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MainPage } from './main.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MainPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MainPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MainPageRoutingModule } from './main-routing.module';\r\n\r\nimport { MainPage } from './main.page';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    HttpClientModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MainPageRoutingModule\r\n  ],\r\n  declarations: [MainPage]\r\n})\r\nexport class MainPageModule {}\r\n","export default \"ion-img {\\n  min-height: 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFpbi9tYWluLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21haW4vbWFpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taW1ne1xyXG4gICAgbWluLWhlaWdodDogMXB4O1xyXG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { NewsApiService } from 'src/app/news/news-api.service';\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.page.html',\r\n  styleUrls: ['./main.page.scss'],\r\n  providers: [NewsApiService]\r\n})\r\nexport class MainPage implements OnInit {\r\n\r\n  public lista_news = new Array<any>();\r\n  public subject:string;\r\n  public title:string;\r\n  public page = 1;\r\n  public maxPage:number;\r\n  public resultsPerPage = 20;\r\n  public user:string;\r\n\r\n  constructor(\r\n    public newsApi:NewsApiService, \r\n    private activatedRoute:ActivatedRoute, \r\n    public loadingController:LoadingController) { }\r\n\r\n  ngOnInit() {\r\n    this.subject = this.activatedRoute.snapshot.paramMap.get('id');\r\n    this.title = this.activatedRoute.snapshot.paramMap.get('title');\r\n    this.user = this.activatedRoute.snapshot.paramMap.get('user');\r\n    console.log(this.title);\r\n  }\r\n\r\n  efeitoRefresh(event){\r\n    this.page = 1;  \r\n    this.carregaPagina();\r\n\r\n    setTimeout(() => {\r\n      event.target.complete();\r\n    }, 500);\r\n  }\r\n\r\n  carregaPagina(){\r\n    this.newsApi.getEverythingAbout(this.subject, this.page).subscribe(\r\n      data=>{\r\n        const response = (data as any);\r\n        /*this.lista_news = this.lista_news.concat(response.articles);\r\n        this.maxPage = Math.floor(response.totalResults/this.resultsPerPage);*/\r\n        if(this.page == 1){\r\n          this.lista_news = response.articles;\r\n        }else{\r\n          this.lista_news = this.lista_news.concat(response.articles);\r\n        }\r\n        this.maxPage = Math.floor(response.totalResults/this.resultsPerPage);\r\n        if(response.totalResults%this.resultsPerPage!=0){\r\n          this.maxPage++;\r\n        } \r\n        console.log(this.maxPage)\r\n      },\r\n\r\n      error=>{\r\n        console.log(error);\r\n      }\r\n    )\r\n  }\r\n\r\n  ionViewDidEnter(){\r\n    this.carregaPagina();\r\n    this.efeitoLoading();\r\n  }\r\n\r\n  async efeitoLoading(){\r\n    const loading = await this.loadingController.create({\r\n      message: 'Carregando as notícias', \r\n      duration: 4000\r\n    });\r\n\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n  }\r\n\r\n  efeitoScrollInfinito(event) {\r\n    if(this.page==this.maxPage){\r\n      event.target.disabled = true;\r\n    }\r\n    if(this.page!=this.maxPage){\r\n      setTimeout(() => {\r\n        this.page++;\r\n        this.carregaPagina();\r\n        console.log('Done');\r\n        event.target.complete();\r\n      }, 4000);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}