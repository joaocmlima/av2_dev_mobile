{"version":3,"sources":["webpack:///src/app/pages/main/main.page.html","webpack:///src/app/news/news-api.service.ts","webpack:///src/app/pages/main/main-routing.module.ts","webpack:///src/app/pages/main/main.module.ts","webpack:///src/app/pages/main/main.page.scss","webpack:///src/app/pages/main/main.page.ts"],"names":["NewsApiService","http","chave","caminhoPadrao","assunto","page","resultsPerPage","result","console","log","get","providedIn","routes","path","component","MainPageRoutingModule","imports","forChild","exports","MainPageModule","declarations","MainPage","newsApi","activatedRoute","loadingController","lista_news","Array","subject","snapshot","paramMap","title","user","event","carregaPagina","setTimeout","target","complete","getEverythingAbout","subscribe","data","response","articles","concat","maxPage","Math","floor","totalResults","error","efeitoLoading","create","message","duration","loading","present","onDidDismiss","role","disabled","selector","template","providers"],"mappings":"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","file":"pages-main-main-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{title}} news</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <ion-header collapse=\\\"condense\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-title size=\\\"large\\\">{{title}} news</ion-title>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"efeitoRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n\\r\\n  <ion-card *ngFor = \\\"let news of lista_news\\\" href={{news.url}}>\\r\\n    <ion-card-header>\\r\\n      <ion-img src={{news.urlToImage}}></ion-img>\\r\\n      <br>\\r\\n      <ion-card-subtitle>{{news.publishedAt}}</ion-card-subtitle>\\r\\n      <ion-card-title>{{news.title}}</ion-card-title>\\r\\n    </ion-card-header>\\r\\n    <ion-card-content>\\r\\n      {{news.description}}\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"efeitoScrollInfinito($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"circular\\\"\\r\\n      loadingText=\\\"Carregando mais notícias...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\";","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NewsApiService {\r\n\r\n  private chave:string = \"a192006ac51443b085001c4a7485c2e0\";\r\n  private caminhoPadrao:string = \"https://newsapi.org/v2\";\r\n\r\n\r\n  constructor(public http:HttpClient) { }\r\n\r\n  public getEverythingAbout(assunto:string, page = 1, resultsPerPage=20){\r\n    let result = `${this.caminhoPadrao}/everything?q=${assunto}&pageSize=${resultsPerPage}&language=pt&page=${page}&apiKey=${this.chave}`;\r\n    console.log(result);\r\n    return this.http.get(result);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { MainPage } from './main.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MainPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class MainPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MainPageRoutingModule } from './main-routing.module';\r\n\r\nimport { MainPage } from './main.page';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    HttpClientModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    MainPageRoutingModule\r\n  ],\r\n  declarations: [MainPage]\r\n})\r\nexport class MainPageModule {}\r\n","export default \"ion-img {\\n  min-height: 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFpbi9tYWluLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21haW4vbWFpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taW1ne1xyXG4gICAgbWluLWhlaWdodDogMXB4O1xyXG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { NewsApiService } from 'src/app/news/news-api.service';\r\n\r\n@Component({\r\n  selector: 'app-main',\r\n  templateUrl: './main.page.html',\r\n  styleUrls: ['./main.page.scss'],\r\n  providers: [NewsApiService]\r\n})\r\nexport class MainPage implements OnInit {\r\n\r\n  public lista_news = new Array<any>();\r\n  public subject:string;\r\n  public title:string;\r\n  public page = 1;\r\n  public maxPage:number;\r\n  public resultsPerPage = 20;\r\n  public user:string;\r\n\r\n  constructor(\r\n    public newsApi:NewsApiService, \r\n    private activatedRoute:ActivatedRoute, \r\n    public loadingController:LoadingController) { }\r\n\r\n  ngOnInit() {\r\n    this.subject = this.activatedRoute.snapshot.paramMap.get('id');\r\n    this.title = this.activatedRoute.snapshot.paramMap.get('title');\r\n    this.user = this.activatedRoute.snapshot.paramMap.get('user');\r\n    console.log(this.title);\r\n  }\r\n\r\n  efeitoRefresh(event){\r\n    this.page = 1;  \r\n    this.carregaPagina();\r\n\r\n    setTimeout(() => {\r\n      event.target.complete();\r\n    }, 500);\r\n  }\r\n\r\n  carregaPagina(){\r\n    this.newsApi.getEverythingAbout(this.subject, this.page).subscribe(\r\n      data=>{\r\n        const response = (data as any);\r\n        /*this.lista_news = this.lista_news.concat(response.articles);\r\n        this.maxPage = Math.floor(response.totalResults/this.resultsPerPage);*/\r\n        if(this.page == 1){\r\n          this.lista_news = response.articles;\r\n        }else{\r\n          this.lista_news = this.lista_news.concat(response.articles);\r\n        }\r\n        this.maxPage = Math.floor(response.totalResults/this.resultsPerPage);\r\n        if(response.totalResults%this.resultsPerPage!=0){\r\n          this.maxPage++;\r\n        } \r\n        console.log(this.maxPage)\r\n      },\r\n\r\n      error=>{\r\n        console.log(error);\r\n      }\r\n    )\r\n  }\r\n\r\n  ionViewDidEnter(){\r\n    this.carregaPagina();\r\n    this.efeitoLoading();\r\n  }\r\n\r\n  async efeitoLoading(){\r\n    const loading = await this.loadingController.create({\r\n      message: 'Carregando as notícias', \r\n      duration: 4000\r\n    });\r\n\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n  }\r\n\r\n  efeitoScrollInfinito(event) {\r\n    if(this.page==this.maxPage){\r\n      event.target.disabled = true;\r\n    }\r\n    if(this.page!=this.maxPage){\r\n      setTimeout(() => {\r\n        this.page++;\r\n        this.carregaPagina();\r\n        console.log('Done');\r\n        event.target.complete();\r\n      }, 4000);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n"]}